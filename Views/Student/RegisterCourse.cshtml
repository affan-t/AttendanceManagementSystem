@model IEnumerable<AttendanceManagementSystem.Models.CourseAllocation>

@{
    ViewData["Title"] = "Register for Courses";
}

<div class="container mt-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2>Available Courses</h2>
        <a asp-action="Index" class="btn btn-secondary">Back to Dashboard</a>
    </div>

    @if (!Model.Any())
    {
        <div class="alert alert-info text-center py-4">
            <h4><i class="bi bi-info-circle"></i> No new courses available.</h4>
            <p>You may have already registered for all available courses, or the Admin has not assigned any courses for your batch yet.</p>
        </div>
    }
    else
    {
        <div class="table-responsive shadow-sm rounded">
            <table class="table table-hover table-striped align-middle mb-0">
                <thead class="table-dark">
                    <tr>
                        <th>Course Name</th>
                        <th>Code</th>
                        <th>Teacher</th>
                        <th>Batch / Section</th>
                        <th>Semester</th>
                        <th class="text-center" style="width: 150px;">Action</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var item in Model)
                    {
                        <tr>
                            <td class="fw-bold">@item.Course.Name</td>
                            <td>@item.Course.Code</td>
                            <td>@item.Teacher.Name</td>
                            <td>@item.Batch.Name (@item.Section.Name)</td>
                            <td>@item.Semester.Name</td>
                            <td class="text-center">
                                <form asp-action="Register" method="post">
                                    <input type="hidden" name="id" value="@item.Id" />
                                    <button type="submit" class="btn btn-success btn-sm w-100" 
                                            onclick="return confirm('Confirm registration for @item.Course.Name?');">
                                        Register
                                    </button>
                                </form>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    }
</div>